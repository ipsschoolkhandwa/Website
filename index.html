<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Public School Khandwa - Admissions Open</title>
    <meta name="google-site-verification" content="5P7gTd-X7NELQdW50jK26u2PPitEoSKabX-UENcl82I" />
    <meta name="google-site-verification" content="4D-EQu61VEgJCrJE2vWp0HtPpX8aGR2jESoRAeD9ysU" />
    <meta name="description" content="Indian Public School Khandwa ‚Äì Admissions open for Nursery class. Quality education, experienced teachers, and child-friendly environment in Khandwa.">

    <!-- Manifest for PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#004aad">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="logo-hq.png">

    <!-- PWA Mobile Config -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Preload HQ logo for better performance -->
    <link rel="preload" href="logo-hq.png" as="image" type="image/png">
    <link rel="preload" href="logo.png" as="image" type="image/png">
    <link rel="preload" href="style.css" as="style">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">

    <!-- Rainbow animation styles -->
    <style>
/* Remove blue highlight/outline on logo click */
.logo:focus,
.logo:active,
#schoolLogo:focus,
#schoolLogo:active {
    outline: none !important;
    box-shadow: none !important;
}

/* Remove default tap highlight on mobile */
.logo {
    -webkit-tap-highlight-color: transparent !important;
    tap-highlight-color: transparent !important;
}

/* Ensure logo ring doesn't get blue outline */
.logo-ring:focus,
.logo-ring:active {
    outline: none !important;
}

/* Remove any default browser styles on click */
.logo-section *:focus,
.logo-section *:active {
    outline: none !important;
}
        /* Rainbow animation for logo ring */
        @keyframes rainbow {
            0% { border-color: #ff0000; }
            16% { border-color: #ff7f00; }
            33% { border-color: #ffff00; }
            50% { border-color: #00ff00; }
            66% { border-color: #0000ff; }
            83% { border-color: #4b0082; }
            100% { border-color: #9400d3; }
        }

        .logo-rainbow {
            animation: rainbow 2s linear infinite !important;
            border-width: 3px !important;
        }
    </style>
</head>
<body>
    <!-- Hearts Container for Animation -->
    <div id="hearts-container"></div>

    <!-- Love Filter Overlay -->
    <div id="love-filter"></div>

    <div class="container">
        <!-- Header with Logo on left and School Name on right -->
        <div class="header">
            <div class="header-content">
                <div class="logo-section">
                    <!-- Smart picture element: HQ for good screens, normal for others -->
                    <picture>
                        <!-- High-res logo for Retina/4K screens -->
                        <source srcset="logo-hq.png" media="(min-width: 768px) and (min-resolution: 2dppx)">
                        <!-- Medium screens -->
                        <source srcset="logo.png" media="(min-width: 480px)">
                        <!-- Default/fallback for all -->
                        <img src="logo.png" 
                             alt="Indian Public School Logo" 
                             class="logo" 
                             id="schoolLogo"
                             crossorigin="anonymous" 
                             loading="eager" 
                             width="140" 
                             height="140"
                             srcset="logo.png 512w, logo-hq.png 1024w"
                             sizes="(max-width: 768px) 140px, 140px">
                    </picture>
                    <div class="logo-ring" id="logoRing"></div>
                    <div class="logo-glow"></div>
                </div>
                <div class="school-info">
                    <div class="school-name">
                        <span class="indian">Indian</span>
                        <span class="public">Public</span>
                        <span class="school-text">School</span>
                    </div>
                    <div class="school-location">
                        <span class="khandwa">KHANDWA</span>
                    </div>
                    <p class="tagline">Creating Good Humans</p>
                </div>
            </div>
        </div>

        <!-- Admission Badge at Top -->
        <div class="admission-top-badge">
            <div class="badge-top-content">
                <i class="fas fa-graduation-cap"></i>
                <span>Admissions Open</span>
                <i class="fas fa-child"></i>
            </div>
        </div>

        <div class="admission-box">
            <h2>Registration for Nursery Class</h2>
            <div class="icon"><i class="fas fa-child"></i></div>
            <p class="admission-note">Limited seats available. Early registration recommended.</p>
        </div>

        <div class="contact-box">
            <h3><i class="fas fa-phone"></i> Contact for Admission</h3>

            <div class="phone">
                <i class="fas fa-mobile-alt"></i>
                <span>+91 7333574759</span>
            </div>

            <div class="buttons">
                <button class="call-btn" id="callBtn">
                    <i class="fas fa-phone"></i> Call Now
                </button>
                <button class="copy-btn" id="copyBtn">
                    <i class="far fa-copy"></i> Copy Number
                </button>
            </div>

            <div class="warning" id="officeHours">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Office Hours: 9:00 AM to 12:00 Noon</p>
            </div>
        </div>

        <div class="info-box">
            <div class="info-item">
                <i class="fas fa-map-marker-alt"></i>
                <div>
                    <h4>Address</h4>
                    <p>Housing Board Colony, Nagchun Road, Khandwa</p>
                </div>
            </div>

            <div class="info-item">
                <i class="far fa-clock"></i>
                <div>
                    <h4>Form Timing</h4>
                    <p>Available at school office: 9 AM to 12 Noon</p>
                </div>
            </div>

            <div class="info-item">
                <i class="fas fa-file-alt"></i>
                <div>
                    <h4>Registration</h4>
                    <p>Visit school office for forms</p>
                </div>
            </div>
        </div>

        <div class="youtube-box">
            <i class="fab fa-youtube"></i>
            <p>Visit our YouTube Channel</p>
            <a href="https://youtube.com/@indianpublicschoolkhandwa5876" target="_blank" id="youtubeLink">
                Watch School Videos
            </a>
        </div>

        <div class="footer">
            <div class="footer-logo">
                <span class="footer-indian">Indian</span>
                <span class="footer-public">Public</span>
                <span class="footer-school">School</span>
            </div>
            <p>¬© 2024 Indian Public School Khandwa</p>
            <p class="seats">Limited seats available for Nursery Class</p>
            <p class="tech-note">Built with <span class="heart-icon" id="heartTrigger">‚ù§Ô∏è</span> by IPS Student</p>
            <p class="secret-hint"><small></small></p>
        </div>

        <div class="toast" id="toast"></div>
    </div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js?v=2.0');
            });
        }
    </script>

    <!-- Main Script -->
    <script src="script.js"></script>

    <!-- Inline Script for PWA Installation and Heart Animation -->
    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Heart animation functionality
            const heartTrigger = document.getElementById('heartTrigger');
            const heartsContainer = document.getElementById('hearts-container');
            const loveFilter = document.getElementById('love-filter');
            let heartsActive = false;

            if (!heartTrigger) {
                console.error('Heart trigger element not found!');
                return;
            }

            // Ensure heart icon is clickable
            heartTrigger.style.pointerEvents = 'auto';
            heartTrigger.style.cursor = 'pointer';
            heartTrigger.style.position = 'relative';
            heartTrigger.style.zIndex = '10000';

            heartTrigger.addEventListener('click', function(e) {
                e.stopPropagation();
                e.preventDefault();

                if (heartsActive) return;

                heartsActive = true;

                // Create initial love burst
                createLoveBurst(e.clientX || window.innerWidth/2, e.clientY || window.innerHeight/2);

                // Activate love filter with delay
                setTimeout(() => {
                    if (loveFilter) loveFilter.classList.add('active');
                    document.body.classList.add('love-mode');
                }, 100);

                // Create LOTS of hearts - Different sizes and types
                const heartCount = 150;
                const heartColors = [
                    '#ff4757', '#ff6b81', '#ff3838', '#ff9ff3', 
                    '#f368e0', '#ffcccc', '#ff9999', '#ff6666',
                    '#ff3388', '#ff00aa', '#ff1493', '#ff69b4'
                ];

                for (let i = 0; i < heartCount; i++) {
                    setTimeout(() => createHeart(i, heartColors), i * 20);
                }

                // Reset after 6 seconds
                setTimeout(() => {
                    if (heartsContainer) heartsContainer.innerHTML = '';
                    if (loveFilter) loveFilter.classList.remove('active');
                    document.body.classList.remove('love-mode');

                    heartsActive = false;
                }, 6000);
            });

            function createHeart(index, colors) {
                if (!heartsContainer) return;

                const heart = document.createElement('div');
                heart.className = 'falling-heart';

                // Random properties
                const sizeType = Math.random();
                let size = 30;

                if (sizeType < 0.3) {
                    size = 20;
                } else if (sizeType < 0.6) {
                    size = 30;
                } else if (sizeType < 0.85) {
                    size = 45;
                } else {
                    size = 60;
                }

                // Random position
                const left = Math.random() * 100;
                const delay = Math.random() * 2;
                const duration = 3 + Math.random() * 3;

                // Random color
                const colorIndex = Math.floor(Math.random() * colors.length);
                const color = colors[colorIndex];

                // Apply styles
                heart.style.left = `${left}%`;
                heart.style.animationDelay = `${delay}s`;
                heart.style.animationDuration = `${duration}s`;
                heart.style.fontSize = `${size}px`;
                heart.style.color = color;
                heart.style.opacity = '0.9';
                heart.style.zIndex = '9999';

                // Add heart emoji
                heart.innerHTML = '‚ù§Ô∏è';

                heartsContainer.appendChild(heart);

                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode === heartsContainer) {
                        heart.remove();
                    }
                }, (duration + delay) * 1000);
            }

            function createLoveBurst(x, y) {
                const burst = document.createElement('div');
                burst.className = 'love-burst';
                burst.style.left = `${x - 50}px`;
                burst.style.top = `${y - 50}px`;
                burst.style.position = 'fixed';

                document.body.appendChild(burst);

                setTimeout(() => {
                    if (burst.parentNode) {
                        burst.remove();
                    }
                }, 1000);
            }

            // Toast function
            function showToast(message) {
                const toast = document.getElementById('toast');
                if (!toast) return;

                toast.textContent = message;
                toast.style.background = 'linear-gradient(135deg, #ff6b81, #ff4757)';
                toast.classList.add('show');

                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // Logo click handler - Rainbow effect + PWA install
            const schoolLogo = document.getElementById('schoolLogo');
            const logoRing = document.getElementById('logoRing');
            let deferredPrompt = null;
            let isShowingPWA = false;

            if (schoolLogo && logoRing) {
                schoolLogo.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();

                    // Add rainbow animation to logo ring
                    logoRing.classList.add('logo-rainbow');
                    
                    // Create rainbow burst effect
                    createRainbowBurst();

                    // Check if PWA is installable
                    if (deferredPrompt && !isShowingPWA) {
                        isShowingPWA = true;
                        
                        // Show install toast
                        setTimeout(() => {
                            showToast('üì± Tap to install the school app!');
                            showInstallHint();
                        }, 500);

                        // Trigger PWA install after 1 second
                        setTimeout(() => {
                            if (deferredPrompt) {
                                deferredPrompt.prompt();
                                deferredPrompt.userChoice.then((choiceResult) => {
                                    if (choiceResult.outcome === 'accepted') {
                                        showToast('‚úÖ App installed successfully!');
                                    }
                                    deferredPrompt = null;
                                    isShowingPWA = false;
                                });
                            } else {
                                isShowingPWA = false;
                            }
                        }, 1000);
                    } else if (!deferredPrompt) {
                        // If no PWA prompt available, just show message
                        setTimeout(() => {
                            showToast('‚≠ê Add to home screen for quick access!');
                        }, 500);
                    }

                    // Remove rainbow animation after 3 seconds
                    setTimeout(() => {
                        logoRing.classList.remove('logo-rainbow');
                    }, 3000);
                });
            }

            function createRainbowBurst() {
                const colors = ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#4b0082', '#9400d3'];
                
                for (let i = 0; i < 12; i++) {
                    setTimeout(() => {
                        const burst = document.createElement('div');
                        burst.style.position = 'fixed';
                        burst.style.width = '6px';
                        burst.style.height = '6px';
                        burst.style.borderRadius = '50%';
                        burst.style.background = colors[i % colors.length];
                        burst.style.top = '50%';
                        burst.style.left = '50%';
                        burst.style.zIndex = '9999';
                        burst.style.pointerEvents = 'none';
                        burst.style.opacity = '0.8';
                        burst.style.transform = 'translate(-50%, -50%)';

                        document.body.appendChild(burst);

                        const angle = (i * 30) * Math.PI / 180;
                        const distance = 60 + Math.random() * 40;

                        burst.animate([
                            { transform: 'translate(-50%, -50%) scale(1)', opacity: 0.8 },
                            { transform: `translate(calc(-50% + ${Math.cos(angle) * distance}px), calc(-50% + ${Math.sin(angle) * distance}px)) scale(0)`, opacity: 0 }
                        ], {
                            duration: 800,
                            easing: 'ease-out'
                        });

                        setTimeout(() => burst.remove(), 800);
                    }, i * 50);
                }
            }

            function showInstallHint() {
                // Create a simple install hint
                const hint = document.createElement('div');
                hint.style.position = 'fixed';
                hint.style.top = '50%';
                hint.style.left = '50%';
                hint.style.transform = 'translate(-50%, -50%)';
                hint.style.background = 'rgba(0, 74, 173, 0.95)';
                hint.style.color = 'white';
                hint.style.padding = '20px';
                hint.style.borderRadius = '15px';
                hint.style.zIndex = '10000';
                hint.style.textAlign = 'center';
                hint.style.border = '3px solid #00bf62';
                hint.style.boxShadow = '0 10px 30px rgba(0,0,0,0.5)';
                hint.style.maxWidth = '300px';
                hint.style.width = '80%';
                hint.innerHTML = `
                    <h3 style="margin: 0 0 10px 0;">Install School App</h3>
                    <p style="margin: 0 0 15px 0; font-size: 14px;">Get quick access on your home screen</p>
                    <button id="hintInstallBtn" style="background: #efa12e; color: #004aad; border: none; padding: 10px 20px; border-radius: 20px; font-weight: bold; cursor: pointer; margin-bottom: 10px;">
                        <i class="fas fa-download"></i> Install Now
                    </button>
                    <p style="font-size: 12px; opacity: 0.8; margin: 0;">Tap outside to close</p>
                `;

                document.body.appendChild(hint);

                // Add click event to install button
                const hintInstallBtn = document.getElementById('hintInstallBtn');
                if (hintInstallBtn && deferredPrompt) {
                    hintInstallBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        deferredPrompt.prompt();
                        document.body.removeChild(hint);
                    });
                }

                // Close on click outside
                setTimeout(() => {
                    hint.addEventListener('click', function(e) {
                        if (e.target === hint) {
                            document.body.removeChild(hint);
                        }
                    });

                    document.addEventListener('click', function closeHint(e) {
                        if (!hint.contains(e.target) && e.target !== schoolLogo) {
                            document.body.removeChild(hint);
                            document.removeEventListener('click', closeHint);
                        }
                    });

                    // Auto close after 8 seconds
                    setTimeout(() => {
                        if (document.body.contains(hint)) {
                            document.body.removeChild(hint);
                        }
                    }, 8000);
                }, 100);
            }

            // PWA Installation listener
            window.addEventListener('beforeinstallprompt', function(e) {
                e.preventDefault();
                deferredPrompt = e;
                console.log('‚úÖ PWA install prompt available');
            });

            // Call and copy buttons functionality
            const callBtn = document.getElementById('callBtn');
            const copyBtn = document.getElementById('copyBtn');

            if (callBtn) {
                callBtn.addEventListener('click', function() {
                    window.location.href = 'tel:+917333574759';
                });
            }

            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    const phoneNumber = '+917333574759';
                    navigator.clipboard.writeText(phoneNumber).then(function() {
                        showToast('Phone number copied to clipboard!');
                    }).catch(function(err) {
                        console.error('Failed to copy: ', err);
                        showToast('Failed to copy number');
                    });
                });
            }
        });
    </script>

    <!-- Chat widget -->
    <script src="//code.tidio.co/k7fzqvwdesmz8nerm3zlgofwutxh0lkq.js" async></script>

    <!-- Events System -->
    <script src="event/event-install.js" defer></script>
</body>
</html>